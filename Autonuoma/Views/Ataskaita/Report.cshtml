@model Org.Ktu.Isk.P175B602.Autonuoma.ViewModels.StoresReport.Ataskaita
@{
	ViewData["title"] = "Parduotuvių ataskaita";
}

<div class="main-content-header container-fluid">
	<span class="title">@ViewData["title"]</span>
</div>

<div class="container-fluid d-flex justify-content-center">
@using (Html.BeginForm())
{
	<div class="form-group container-fluid d-flex justify-content-between align-items-center p-0">
		<div class="form-group container-fluid d-flex justify-content-left align-items-center m-0 p-0">
			<label>Gyvūnai&nbsp;gimę&nbsp;nuo:&nbsp;</label>
			@Html.TextBoxFor(m => m.report.DateFrom, "{0:yyyy-MM-dd}", new { @class = "date-picker" })

			<span style="width:3ch;"></span>

			<label>Gyvūnai&nbsp;gimę&nbsp;iki:&nbsp;</label>
			<span style="width:3ch;"></span>
			@Html.TextBoxFor(m => m.report.DateTo, "{0:yyyy-MM-dd}", new { @class = "date-picker" })

			<span style="width:3ch;"></span>
		</div>
	</div>

	<div class="form-group container-fluid d-flex justify-content-between align-items-center p-0">
		<div class="form-group container-fluid d-flex justify-content-left align-items-center m-0 p-0">
			<label>Gyvūnų&nbsp;kaina&nbsp;nuo:&nbsp;</label>
			<span style="width:3ch;"></span>
			@Html.EditorFor(m => m.report.KainaFrom, new { htmlAttributes = new { @class = "form-control" } })

			<span style="width:10ch;"></span>

			<label>Gyvūnų&nbsp;kaina&nbsp;iki:&nbsp;</label>
			<span style="width:3ch;"></span>
			@Html.EditorFor(m => m.report.KainaTo, new { htmlAttributes = new { @class = "form-control" } })

			<span style="width:3ch;"></span>
		</div>
	</div>

	<div class="form-group container-fluid d-flex justify-content-between align-items-center p-0">
		<div class="form-group container-fluid d-flex justify-content-left align-items-center m-0 p-0">
			<label>Gyvūnų&nbsp;rūšis:</label>
			<span style="width:6ch;"></span>
			@Html.DropDownListFor(m => m.report.Rusis, Model.Lists.Rusys, "--------------", new { @class = "form-control" })
			@Html.ValidationMessageFor(m => m.report.Rusis, "", new { @class = "text-danger" })
		</div>
	</div>

	<div class="form-group container-fluid d-flex justify-content-between align-items-center p-0">
		<button
			class="btn btn-success"
			style="white-space: nowrap;"
			name="save"
			value="Model.report"
		><i class="fa-solid fa-filter"></i> Atrinkti</button>
	</div>

	<table class="table table-striped table-hover w-100">
		<thead>
			<tr style="background-color:#009B77">
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].GyvunoID)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].GyvunoVardas)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].GimimoData)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].Dienos)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].Svoris)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].FkLytisToString)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].FkRusisToString)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].FkDydisToString)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].Kaina)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].FkSutartis)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].FkKlientas)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].FkKlientasToString)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].SumaVakcinaciju)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].KiekisVakcinaciju)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].SumaVaistu)</th>
				<th>@Html.DisplayNameFor(m => m.report.Parduotuves.First().Value[0].KiekisVaistu)</th>
			</tr>
		</thead>
		<tbody>
			@if( Model.report.Parduotuves.Count == 0 )
			{
			<tr>
				<td colspan="16" align="center"><b style="color:red;">Nerasta parametrus atitinkančių gyvūnų</b></td>
			</tr>
			}

			@foreach (var item in Model.report.Parduotuves)
			{
				<tr style="background-color: #55B4B0">
					<td colspan="16" align="center"><b>@Html.DisplayFor(m => item.Key)</b></td>
				</tr>
				foreach(var parduotuve in item.Value)
				{
					<tr>
						<td>@Html.DisplayFor(m => parduotuve.GyvunoID)</td>
						<td>@Html.DisplayFor(m => parduotuve.GyvunoVardas)</td>
						<td>@Html.DisplayFor(m => parduotuve.GimimoData)</td>
						<td>@Html.DisplayFor(m => parduotuve.Dienos)</td>
						<td>@Html.DisplayFor(m => parduotuve.Svoris)</td>
						<td>@Html.DisplayFor(m => parduotuve.FkLytisToString)</td>
						<td>@Html.DisplayFor(m => parduotuve.FkRusisToString)</td>
						<td>@Html.DisplayFor(m => parduotuve.FkDydisToString)</td>
						<td>@Html.DisplayFor(m => parduotuve.Kaina)</td>
						<td>@Html.DisplayFor(m => parduotuve.FkSutartis)</td>
						<td>@Html.DisplayFor(m => parduotuve.FkKlientas)</td>
						<td>@Html.DisplayFor(m => parduotuve.FkKlientasToString)</td>
						<td>@Html.DisplayFor(m => parduotuve.SumaVakcinaciju)</td>
						<td>@Html.DisplayFor(m => parduotuve.KiekisVakcinaciju)</td>
						<td>@Html.DisplayFor(m => parduotuve.SumaVaistu)</td>
						<td>@Html.DisplayFor(m => parduotuve.KiekisVaistu)</td>
					</tr>
				}
				<tr>
					<td colspan="12"></td>
					<td><b>@Html.DisplayFor(m => item.Value.First().BendraSumaVakcinaciju)</b></td>
					<td><b>@Html.DisplayFor(m => item.Value.First().BendraKiekisVakcinaciju)</b></td>
					<td><b>@Html.DisplayFor(m => item.Value.First().BendraSumaVaistu)</b></td>
					<td><b>@Html.DisplayFor(m => item.Value.First().BendraKiekisVaistu)</b></td>
				</tr>
			}

			<tr style="background-color: #009B77">
				<td height="10px;" colspan="16" align="center"><b>Bendra suma</b></td>
			</tr>

			<tr>
				<td colspan="12"></td>
				<td>
					@Html.DisplayFor(m => Model.report.VisoSumaVakcinaciju)
				</td>
				<td>
					@Html.DisplayFor(m => Model.report.VisoKiekisVakcinaciju)
				</td>
				<td>
					@Html.DisplayFor(m => Model.report.VisoSumaVaistu)
				</td>
				<td>
					@Html.DisplayFor(m => Model.report.VisoKiekisVaistu)
				</td>
			</tr>
		</tbody>
	</table>
}
</div>